<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3Dæ‰“å°å·¥åŠé¢„çº¦ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles/index.css">
</head>
<body>
    <header class="header">
        <nav class="nav" style="width: 100%; display: flex; justify-content: space-between; align-items: center;">
            <div class="logo-group" style="display: flex; align-items: center;">
                <a href="index.html" class="logo" style="text-decoration: none;">
                    <img src="images/icons/æº¥æ¸ŠLOGO.png" alt="æº¥æ¸ŠLOGO" style="height: 40px; margin-right: 15px;">
                </a>
                <a href="index.html" class="logo" style="text-decoration: none;">
                    <img src="images/icons/ç§‘åLOGO.jpg" alt="ç§‘åLOGO" style="height: 45px; margin-left: 27.3px;">
                </a>
            </div>

            <div class="nav-links">
                <a href="index.html"><i class="fas fa-home"></i> é¦–é¡µ</a>
                <a href="workshop.html"><i class="fas fa-cube"></i> 3Dæ‰“å°å·¥åŠ</a>
                <a href="about.html"><i class="fas fa-info-circle"></i> å…³äºæˆ‘ä»¬</a>
                <a href="login.html" id="loginBtn"><i class="fas fa-sign-in-alt"></i> <span id="loginBtnText">ç™»å½• / æ³¨å†Œ</span></a>
            </div>
        </nav>
    </header>

    <div class="container">
        <div class="mission-banner">
            <h1 class="mission-text">åˆ›æ–° Â· å®è·µ Â· æ¢ç´¢ Â· å“è¶Š</h1>
        </div>

        <div class="gallery-container" id="galleryContainer">
            <!-- ä½œå“å›¾ç‰‡å°†é€šè¿‡APIåŠ¨æ€åŠ è½½ -->
            <div class="gallery-item">
                <img src="images/3d-printing/display1.jpg" alt="å±•ç¤ºå›¾1">
            </div>
            <div class="gallery-item">
                <img src="images/3d-printing/display2.jpg" alt="å±•ç¤ºå›¾2">
            </div>
            <div class="gallery-item">
                <img src="images/3d-printing/display3.jpg" alt="å±•ç¤ºå›¾3">
            </div>
            <div class="gallery-item">
                <img src="images/3d-printing/display4.jpg" alt="å±•ç¤ºå›¾4">
            </div>
        </div>

        <div class="news-section">
            <div class="announcement-icon">ğŸ“¢</div>
            <div class="news-header">
                <h2 class="news-title">æ–°é—»ä¸å…¬å‘Š</h2>
            </div>

            <ul class="news-list" id="newsList">
                <!-- æ–°é—»å°†é€šè¿‡APIåŠ¨æ€åŠ è½½ -->
                <li class="news-item">
                    <h4><a href="#" style="color: inherit; text-decoration: none;">åŠ è½½ä¸­...</a></h4>
                    <p>æ­£åœ¨è·å–æœ€æ–°æ–°é—»...</p>
                </li>
            </ul>
            <div class="more-btn-container" style="margin-bottom: 0.5rem;">
                <a href="#" class="more-btn" onclick="alert('æ›´å¤šæ–°é—»åŠŸèƒ½å³å°†ä¸Šçº¿ï¼'); return false;">æŸ¥çœ‹æ›´å¤š</a>
            </div>
        </div>
    </div>

<footer>
    <div class="wrapper footer" id="footer" 
        style="background: #04285e; color: #fff; padding: 3rem 0 1rem 0; margin-top: 3rem; white-space: nowrap;">

        <div class="inner" style="max-width: 1200px; margin: 0 auto; padding: 0 2rem; overflow: hidden;">
            <div class="mod clearfix" style="overflow: hidden;">

                <!-- é¡¶éƒ¨åŒºåŸŸ - å¤–å±‚gridå¸ƒå±€ï¼Œé€šè¿‡å†…è¾¹è·å’Œåˆ†éš”çº¿å®ç°æ¿å—åˆ†éš” -->
                <div class="foot-center" 
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 0; margin-bottom: 3rem; overflow: hidden;">

                    <!-- å·¦æ  - å­¦é™¢ä¿¡æ¯ -->
                    <div class="center1" style="overflow: hidden; padding: 0 2rem; border-right: 1px solid rgba(255,255,255,0.3);">
                        <div class="schoolname" 
                            style="font-size: 1.6rem; font-weight: bold; margin-bottom: 3rem; color: #fff; overflow: hidden; text-overflow: ellipsis;">
                            æº¥æ¸Šæœªæ¥æŠ€æœ¯å­¦é™¢
                        </div>
                        <div class="schoolinfo" style="color: #fff; line-height: 3; overflow: hidden; text-overflow: ellipsis;">
                            <div class="address" 
                                style="margin-bottom: 1rem; overflow: hidden; white-space: normal; line-height: 1.6;">
                                ä¸Šæµ·å¸‚é—µè¡ŒåŒºä¸œå·è·¯800åŒ…ç‰åˆšå›¾ä¹¦é¦†ä¸œç¿¼ï¼ˆä¸´æ—¶åŠå…¬åœºåœ°ï¼‰
                            </div>
                            <div class="tel" style="margin-bottom: 0.3rem;">021-54741175</div>
                            <div class="postnum">200240</div>
                        </div>
                    </div>

                    <!-- ä¸­æ ï¼šå‹æƒ…é“¾æ¥ + ç½‘ç«™å¯¼èˆªï¼ˆå†…éƒ¨é€šè¿‡åˆ†éš”çº¿åˆ†å¼€ï¼‰ -->
                    <div style="
                        display: grid;
                        grid-template-columns: 1fr 1px 1fr; /* å‹æƒ…é“¾æ¥ + åˆ†éš”çº¿ + ç½‘ç«™å¯¼èˆª */
                        gap: 0; /* å–æ¶ˆé—´éš™ï¼Œé€šè¿‡å†…è¾¹è·æ§åˆ¶é—´è· */
                        padding: 0 2rem;
                        border-right: 1px solid rgba(255,255,255,0.3); /* ç»Ÿä¸€ä¸ºå·¦æ åˆ†éš”çº¿æ ·å¼ */
                        margin-right: -4rem;
                    ">
                        <!-- å‹æƒ…é“¾æ¥ -->
                        <div style="padding-right: 2rem; text-align: center;">
                            <div class="name yh" 
                                style="font-size: 1.1rem; font-weight: bold; margin-bottom: 1.8rem; color: #fff;">
                                å‹æƒ…é“¾æ¥
                            </div>
                            <ul style="list-style: none; padding: 0; margin: 0;">
                                <li style="margin-bottom: 1.8rem;"><a href="http://www.moe.gov.cn/" style="color: #fff; text-decoration: none;">æ•™è‚²éƒ¨</a></li>
                                <li style="margin-bottom: 1.8rem;"><a href="https://edu.sh.gov.cn/" style="color: #fff; text-decoration: none;">ä¸Šæµ·å¸‚æ•™å§”</a></li>
                                <li style="margin-bottom: 1.8rem;"><a href="https://www.sjtu.edu.cn/" style="color: #fff; text-decoration: none;">ä¸Šæµ·äº¤å¤§</a></li>
                                <li style="margin-bottom: 1.8rem;"><a href="https://www.shsmu.edu.cn/" style="color: #fff; text-decoration: none;">äº¤å¤§åŒ»å­¦é™¢</a></li>
                            </ul>
                        </div>

                        <!-- å‹æƒ…é“¾æ¥å’Œç½‘ç«™å¯¼èˆªä¹‹é—´çš„åˆ†éš”çº¿ï¼ˆç»Ÿä¸€æ ·å¼ï¼‰ -->
                        <div style="background-color: rgba(255,255,255,0.3); width: 1px; height: auto; align-self: stretch;"></div>

                        <!-- ç½‘ç«™å¯¼èˆª -->
                        <div style="padding-left: 2rem; display: flex; justify-content: flex-end;">
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem;">
                                <ul style="list-style: none; padding: 0; margin-top: 0.1rem; text-align: center;">
                                    <li style="margin-bottom: 2rem;"><a href="https://gift.sjtu.edu.cn/about" style="color: #fff; text-decoration: none; font-weight: bold;">å…³äºæº¥æ¸Š</a></li>
                                    <li style="margin-bottom: 2rem;"><a href="https://gift.sjtu.edu.cn/research" style="color: #fff; text-decoration: none; font-weight: bold;">ç§‘å­¦ç ”ç©¶</a></li>
                                    <li style="margin-bottom: 2rem;"><a href="https://gift.sjtu.edu.cn/party" style="color: #fff; text-decoration: none; font-weight: bold;">å…šå»ºå·¥ä½œ</a></li>
                                    <li style="margin-bottom: 2rem;"><a href="https://gift.sjtu.edu.cn/cooperation" style="color: #fff; text-decoration: none; font-weight: bold;">å¯¹å¤–åˆä½œ</a></li>
                                </ul>
                                <ul style="list-style: none; padding: 0; margin-top: 0.1rem; text-align: center;">
                                    <li style="margin-bottom: 2rem;"><a href="https://gift.sjtu.edu.cn/faculty" style="color: #fff; text-decoration: none; font-weight: bold;">å¸ˆèµ„åŠ›é‡</a></li>
                                    <li style="margin-bottom: 2rem;"><a href="https://gift.sjtu.edu.cn/campus" style="color: #fff; text-decoration: none; font-weight: bold;">æ ¡å›­ç”Ÿæ´»</a></li>
                                    <li style="margin-bottom: 2rem;"><a href="https://gift.sjtu.edu.cn/develop" style="color: #fff; text-decoration: none; font-weight: bold;">äººæ‰åŸ¹å…»</a></li>
                                    <li style="margin-bottom: 2rem;"><a href="https://gift.sjtu.edu.cn/joinus" style="color: #fff; text-decoration: none; font-weight: bold;">åŠ å…¥æˆ‘ä»¬</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- å³æ  - ç¤¾äº¤åª’ä½“ -->
                    <div class="center4" style="overflow: hidden; padding-left: 7.5rem; padding-right: 2rem;">
                        <div class="qitem" style="margin-bottom: 1rem; text-align: center;">
                            <div class="name" 
                                style="font-size: 1.1rem; font-weight: bold; margin-bottom: 0.8rem; color: #fff; position: relative; padding-bottom: 0.3rem; display: inline-block;">
                                ç¤¾äº¤åª’ä½“
                            </div>
                            <div style="display: flex; justify-content: center; align-items: flex-start; gap: 1.5rem;">
                                <div class="qrcode-item" style="text-align: center;">
                                    <img src="https://gift.sjtu.edu.cn/_upload/tpl/00/1c/28/template28/./images/qrcode-1.png" 
                                         style="width: 150px; height: 150px; border-radius: 4px; border: 1px solid #fff;">
                                    <div style="margin-top: 0.5rem; font-size: 0.85rem; color: #fff;">å®˜æ–¹å¾®ä¿¡å…¬ä¼—å·</div>
                                </div>
                            </div>
                        </div>
                        <a target="_blank" href="https://gift.sjtu.edu.cn/storage/gift/web/cn/file/2025/08/caee27912aa5fde8524164a66013a399.pdf"
                            style="color: #fff; text-decoration: none; font-weight: bold; display: block; text-align: center; margin-top: -0.5rem; font-size: 1.1rem;">
                            å­¦é™¢å®£ä¼ å†Œ
                        </a>
                    </div>
                </div>

                <!-- åº•éƒ¨ç‰ˆæƒ -->
<div class="foot-bot" style="border-top: 1px solid #fff; padding-top: 1rem; text-align: center;">
    <p style="color: #fff; font-size: 0.85rem; margin: 0 0 0.3rem 0;">Â© 2025 æº¥æ¸Šç§‘åç½‘ç»œç®¡ç†ç³»ç»Ÿ. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
    <p style="color: #fff; font-size: 0.85rem; margin: 0;">ä¸Šæµ·äº¤é€šå¤§å­¦æº¥æ¸Šæœªæ¥æŠ€æœ¯å­¦é™¢</p>
</div>

            </div>
        </div>
    </div>
</footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ================= åŠ è½½ä½œå“å›¾ç‰‡ =================
            async function loadWorkshopWorks() {
                try {
                    const response = await fetch('/api/workshop/works', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });

                    const result = await response.json();

                    if (response.ok && result.data && result.data.works) {
                        const galleryContainer = document.getElementById('galleryContainer');
                        galleryContainer.innerHTML = '';

                        result.data.works.forEach((imgSrc, index) => {
                            const galleryItem = document.createElement('div');
                            galleryItem.className = 'gallery-item';
                            galleryItem.innerHTML = `
                                <img src="${imgSrc}" alt="ä½œå“${index + 1}">
                            `;
                            galleryContainer.appendChild(galleryItem);
                        });
                    }
                } catch (error) {
                    console.error('åŠ è½½ä½œå“å›¾ç‰‡å¤±è´¥:', error);
                }
            }

            // ================= åŠ è½½æ–°é—»åˆ—è¡¨ =================
            async function loadNews() {
                try {
                    const response = await fetch('/api/news/links', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });

                    const result = await response.json();

                    if (response.ok && result.data) {
                        const newsList = document.getElementById('newsList');
                        newsList.innerHTML = '';

                        const { links, titles, briefs } = result.data;
                        const newsCount = Math.min(links.length, titles.length, briefs.length);

                        for (let i = 0; i < newsCount; i++) {
                            const newsItem = document.createElement('li');
                            newsItem.className = 'news-item';
                            newsItem.innerHTML = `
                                <h4>
                                    <a href="${links[i]}" style="color: inherit; text-decoration: none;">${titles[i]}</a>
                                </h4>
                                <p>${briefs[i]}</p>
                            `;
                            newsList.appendChild(newsItem);
                        }
                    }
                } catch (error) {
                    console.error('åŠ è½½æ–°é—»å¤±è´¥:', error);
                    const newsList = document.getElementById('newsList');
                    newsList.innerHTML = `
                        <li class="news-item">
                            <h4><a href="#" style="color: inherit; text-decoration: none;">æš‚æ— æ–°é—»</a></h4>
                            <p>æ— æ³•åŠ è½½æ–°é—»å†…å®¹ï¼Œè¯·ç¨åé‡è¯•</p>
                        </li>
                    `;
                }
            }

            // é¡µé¢åŠ è½½æ—¶è°ƒç”¨API
            loadWorkshopWorks();
            loadNews();

            // ================= æ£€æŸ¥ç™»å½•çŠ¶æ€ =================
            async function checkLoginStatus() {
                try {
                    const response = await fetch('/api/user/status', {
                        method: 'GET',
                        headers: {
                            'Content-Type': 'application/json'
                        }
                    });

                    const result = await response.json();

                    if (response.ok && result.data && result.data.logged_in) {
                        const loginBtn = document.getElementById('loginBtn');
                        const loginBtnText = document.getElementById('loginBtnText');

                        loginBtn.classList.add('logged-in');
                        loginBtn.href = 'user.html';
                        loginBtnText.textContent = `æ¬¢è¿, ${result.data.username || 'ç”¨æˆ·'}`;
                    }
                } catch (error) {
                    console.log('æœªç™»å½•æˆ–æ£€æŸ¥ç™»å½•çŠ¶æ€å¤±è´¥');
                }
            }

            checkLoginStatus();
        });
    </script>
</body>
</html>
